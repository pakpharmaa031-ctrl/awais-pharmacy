<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pak Pharma Pro - Professional Pharmacy Management System</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar" id="navbar" style="display: none;">
        <div class="navbar-container">
            <div class="logo">
                <h1>üíä Pak Pharma Pro</h1>
                <p class="tagline">Professional Pharmacy Management</p>
            </div>
            <div class="nav-links" id="navLinks">
                <span id="userGreeting" class="user-greeting"></span>
                <a href="#" onclick="logout()" class="nav-link logout-btn">Logout</a>
            </div>
        </div>
    </nav>

    <!-- Login Page -->
    <div id="loginPage" class="page active">
        <div class="login-container">
            <div class="login-box">
                <div class="login-header">
                    <h1>üíä Pak Pharma Pro</h1>
                    <p>Professional Pharmacy Management System</p>
                </div>
                
                <!-- Login Form -->
                <form id="loginForm" onsubmit="handleLogin(event)">
                    <h3>Login</h3>
                    <div class="form-group">
                        <label for="username">Username/Email:</label>
                        <input type="text" id="username" placeholder="Enter username or email" required>
                    </div>
                    <div class="form-group">
                        <label for="password">Password:</label>
                        <input type="password" id="password" placeholder="Enter password" required>
                    </div>
                    <button type="submit" class="btn btn-primary">Login</button>
                    <p class="login-hint" id="loginHint" style="text-align: center; margin-top: 1rem; color: #666; font-size: 0.9rem;">
                        Owner: Username: admin | Password: admin123
                    </p>
                </form>

                <!-- Registration Form -->
                <form id="registrationForm" onsubmit="handleRegister(event)" style="display:none;">
                    <h3>Create Account</h3>
                    <div class="form-group">
                        <label for="regName">Full Name:</label>
                        <input type="text" id="regName" placeholder="Enter your full name" required>
                    </div>
                    <div class="form-group">
                        <label for="regEmail">Email:</label>
                        <input type="email" id="regEmail" placeholder="Enter email" required>
                    </div>
                    <div class="form-group">
                        <label for="regPhone">Phone:</label>
                        <input type="tel" id="regPhone" placeholder="Enter phone number" required>
                    </div>
                    <div class="form-group">
                        <label for="regUsername">Username:</label>
                        <input type="text" id="regUsername" placeholder="Choose username" required>
                    </div>
                    <div class="form-group">
                        <label for="regPassword">Password:</label>
                        <input type="password" id="regPassword" placeholder="Enter password (min 6 chars)" required>
                    </div>
                    <div class="form-group">
                        <label for="regConfirmPassword">Confirm Password:</label>
                        <input type="password" id="regConfirmPassword" placeholder="Confirm password" required>
                    </div>
                    <button type="submit" class="btn btn-success">Register</button>
                    <button type="button" class="btn btn-secondary" onclick="toggleForms()">Back to Login</button>
                </form>

                <!-- Toggle Button -->
                <div id="toggleAuthSection" style="text-align: center; margin-top: 1rem;">
                    <p>Don't have an account? <button type="button" class="btn btn-link" onclick="toggleForms()" style="background: none; border: none; color: #0066cc; cursor: pointer; text-decoration: underline;">Register here</button></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Owner Dashboard -->
    <div id="ownerDashboard" class="page">
        <div class="container">
            <div class="page-header">
                <h2>Owner Dashboard</h2>
                <div class="header-actions">
                    <button class="btn btn-warning" onclick="goToSection('ownerNotifications')">üîî Orders <span id="notificationBadge" style="background: red; color: white; border-radius: 50%; padding: 2px 6px; font-size: 0.8rem; margin-left: 5px; display: none;">0</span></button>
                    <button class="btn btn-primary" onclick="goToSection('ownerStats')">Statistics</button>
                    <button class="btn btn-primary" onclick="goToSection('ownerMedicines')">Medicines</button>
                    <button class="btn btn-primary" onclick="goToSection('ownerCompanies')">Companies</button>
                    <button class="btn btn-primary" onclick="goToSection('ownerReports')">Reports</button>
                    <button class="btn btn-info" onclick="openPasswordChangeModal('owner')">üîê Change Password</button>
                </div>
            </div>

            <!-- Owner Account Settings -->
            <div class="section" style="margin-bottom: 2rem; display:none;">
                <button class="btn btn-primary" onclick="openPasswordChangeModal('owner')">üîê Change Password</button>
            </div>

            <!-- Statistics Section -->
            <div id="ownerStats" class="section">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">üíä</div>
                        <h3>Total Products</h3>
                        <p class="stat-value" id="totalProducts">0</p>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üí∞</div>
                        <h3>Total Revenue</h3>
                        <p class="stat-value" id="totalRevenue">PKR 0</p>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üè¢</div>
                        <h3>Companies</h3>
                        <p class="stat-value" id="totalCompanies">0</p>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üì¶</div>
                        <h3>Low Stock Items</h3>
                        <p class="stat-value" id="lowStockCount">0</p>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚ö†Ô∏è</div>
                        <h3>Expiring Soon</h3>
                        <p class="stat-value" id="expiringCount">0</p>
                    </div>
                </div>
            </div>

            <!-- Orders Notifications Section -->
            <div id="ownerNotifications" class="section" style="display:none;">
                <h3>üì¶ Customer Orders</h3>
                <div style="margin-bottom: 1rem;">
                    <button class="btn btn-info" onclick="loadOwnerNotifications()">üîÑ Refresh Orders</button>
                </div>
                <div id="notificationsContainer" class="activity-list" style="max-height: 600px; overflow-y: auto;">
                    <p style="text-align: center; color: #999;">No new orders yet</p>
                </div>
            </div>

            <!-- Medicines Management -->
            <div id="ownerMedicines" class="section" style="display:none;">
                <h3>Medicines Management</h3>
                <div class="section-header">
                    <button class="btn btn-primary" onclick="toggleForm('addMedicineForm')">+ Add Medicine</button>
                    <input type="text" id="searchMedicines" placeholder="Search medicines..." class="search-input" onkeyup="filterMedicines()">
                </div>

                <form id="addMedicineForm" class="form-section" style="display:none;" onsubmit="addMedicine(event)">
                    <h4>Add New Medicine</h4>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Medicine Name:</label>
                            <input type="text" id="medicineName" placeholder="e.g., Aspirin 500mg" required>
                        </div>
                        <div class="form-group">
                            <label>Company:</label>
                            <select id="medicineCompany" required>
                                <option value="">Select Company</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Category:</label>
                            <select id="medicineCategory" required>
                                <option value="">Select Category</option>
                                <option value="pain-relief">Pain Relief</option>
                                <option value="cold-flu">Cold & Flu</option>
                                <option value="digestive">Digestive</option>
                                <option value="antibiotics">Antibiotics</option>
                                <option value="vitamins">Vitamins & Supplements</option>
                                <option value="skincare">Skincare</option>
                                <option value="antacids">Antacids</option>
                                <option value="cough">Cough Syrups</option>
                                <option value="cardiac">Cardiac</option>
                                <option value="diabetes">Diabetes</option>
                                <option value="injections">Injections</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Batch Number:</label>
                            <input type="text" id="batchNumber" placeholder="e.g., B12345" required>
                        </div>
                        <div class="form-group">
                            <label>Quantity:</label>
                            <input type="number" id="medicineQuantity" placeholder="0" required>
                        </div>
                        <div class="form-group">
                            <label>Cost Price (PKR):</label>
                            <input type="number" id="costPrice" step="0.01" placeholder="0.00" required>
                        </div>
                        <div class="form-group">
                            <label>Selling Price (PKR):</label>
                            <input type="number" id="sellingPrice" step="0.01" placeholder="0.00" required>
                        </div>
                        <div class="form-group">
                            <label>Expiry Date:</label>
                            <input type="date" id="expiryDate" required>
                        </div>
                        <div class="form-group">
                            <label>Strength/Form:</label>
                            <input type="text" id="strength" placeholder="e.g., 500mg Tablet" required>
                        </div>
                        <div class="form-group">
                            <label>Description:</label>
                            <textarea id="medicineDescription" placeholder="Medicine description..." rows="3"></textarea>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-success">Add Medicine</button>
                    <button type="button" class="btn btn-secondary" onclick="toggleForm('addMedicineForm')">Cancel</button>
                </form>

                <div class="table-section">
                    <table id="medicinesTable" class="data-table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Company</th>
                                <th>Category</th>
                                <th>Batch</th>
                                <th>Stock</th>
                                <th>Cost Price</th>
                                <th>Selling Price</th>
                                <th>Expiry Date</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="medicinesBody"></tbody>
                    </table>
                </div>
            </div>

            <!-- Companies Management -->
            <div id="ownerCompanies" class="section" style="display:none;">
                <h3>Pharmaceutical Companies</h3>
                <div class="section-header">
                    <button class="btn btn-primary" onclick="toggleForm('addCompanyForm')">+ Add Company</button>
                </div>

                <form id="addCompanyForm" class="form-section" style="display:none;" onsubmit="addCompany(event)">
                    <h4>Add New Company</h4>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Company Name:</label>
                            <input type="text" id="companyName" placeholder="e.g., GSK, Pfizer" required>
                        </div>
                        <div class="form-group">
                            <label>Contact Person:</label>
                            <input type="text" id="companyContact" placeholder="Full name" required>
                        </div>
                        <div class="form-group">
                            <label>Email:</label>
                            <input type="email" id="companyEmail" placeholder="company@example.com" required>
                        </div>
                        <div class="form-group">
                            <label>Phone:</label>
                            <input type="tel" id="companyPhone" placeholder="0300-1234567" required>
                        </div>
                        <div class="form-group">
                            <label>Address:</label>
                            <input type="text" id="companyAddress" placeholder="Full address" required>
                        </div>
                        <div class="form-group">
                            <label>City:</label>
                            <input type="text" id="companyCity" placeholder="City" required>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-success">Add Company</button>
                    <button type="button" class="btn btn-secondary" onclick="toggleForm('addCompanyForm')">Cancel</button>
                </form>

                <div class="table-section">
                    <table id="companiesTable" class="data-table">
                        <thead>
                            <tr>
                                <th>Company Name</th>
                                <th>Contact Person</th>
                                <th>Email</th>
                                <th>Phone</th>
                                <th>City</th>
                                <th>Products</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="companiesBody"></tbody>
                    </table>
                </div>
            </div>

            <!-- Reports -->
            <div id="ownerReports" class="section" style="display:none;">
                <h3>Business Reports</h3>
                <div class="reports-grid">
                    <div class="report-card">
                        <h4>Sales Report</h4>
                        <div class="form-group">
                            <label>From Date:</label>
                            <input type="date" id="reportFromDate">
                        </div>
                        <div class="form-group">
                            <label>To Date:</label>
                            <input type="date" id="reportToDate">
                        </div>
                        <button class="btn btn-primary" onclick="generateSalesReport()">Generate</button>
                        <div id="salesReportResult" class="report-result"></div>
                    </div>

                    <div class="report-card">
                        <h4>Inventory Report</h4>
                        <button class="btn btn-primary" onclick="generateInventoryReport()">Generate</button>
                        <div id="inventoryReportResult" class="report-result"></div>
                    </div>

                    <div class="report-card">
                        <h4>Profit & Loss</h4>
                        <button class="btn btn-primary" onclick="generateProfitReport()">Generate</button>
                        <div id="profitReportResult" class="report-result"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Customer Portal -->
    <div id="customerPortal" class="page">
        <div class="container">
            <div class="page-header">
                <h2>Pak Pharma - Customer Portal</h2>
                <div class="header-actions">
                    <button class="btn btn-primary" onclick="goToSection('custBrowse')">Browse Medicines</button>
                    <button class="btn btn-primary" onclick="goToSection('custMyOrders'); displayCustomerOrders();">My Orders</button>
                    <button class="btn btn-primary" onclick="goToSection('custAbout')">About</button>
                </div>
            </div>

            <!-- Browse Medicines -->
            <div id="custBrowse" class="section">
                <h3>Browse Our Medicines</h3>
                <div class="filter-section">
                    <input type="text" id="custSearchMedicines" placeholder="Search medicines..." class="search-input" onkeyup="filterMedicinesCustomer()">
                    <select id="categoryFilter" onchange="filterByCategory()">
                        <option value="">All Categories</option>
                        <option value="pain-relief">Pain Relief</option>
                        <option value="cold-flu">Cold & Flu</option>
                        <option value="digestive">Digestive</option>
                        <option value="antibiotics">Antibiotics</option>
                        <option value="vitamins">Vitamins & Supplements</option>
                        <option value="skincare">Skincare</option>
                        <option value="antacids">Antacids</option>
                        <option value="cough">Cough Syrups</option>
                        <option value="cardiac">Cardiac</option>
                        <option value="diabetes">Diabetes</option>
                        <option value="injections">Injections</option>
                    </select>
                    <button class="btn btn-success" onclick="openModal('cartModal')" style="margin-left: 1rem;">üõí View Cart</button>
                </div>

                <div class="medicines-grid" id="medicinesGrid"></div>
            </div>

            <!-- My Orders -->
            <div id="custMyOrders" class="section" style="display:none;">
                <h3>My Orders</h3>
                <div id="customerOrders" class="activity-list"></div>
            </div>

            <!-- About -->
            <div id="custAbout" class="section" style="display:none;">
                <h3>About Pak Pharma Company Limited</h3>
                <div class="info-card">
                    <p>Welcome to <strong>Pak Pharma Company Limited</strong>, your trusted pharmacy partner for quality medicines and healthcare products.</p>
                    <h4>Our Services:</h4>
                    <ul>
                        <li>Wide range of medicines from reputable pharmaceutical companies</li>
                        <li>Professional pharmacist consultation</li>
                        <li>Fast and reliable service</li>
                        <li>Competitive pricing</li>
                    </ul>
                    <h4>Contact Us:</h4>
                    <p>Phone: 0300-1234567<br>Email: info@pakpharma.com</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div id="cartModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('cartModal')">&times;</span>
            <h2>Shopping Cart</h2>
            <div id="cartSummary" class="cart-summary"></div>
            <div class="modal-actions">
                <button class="btn btn-success" onclick="checkout()">Checkout</button>
                <button class="btn btn-secondary" onclick="closeModal('cartModal')">Continue Shopping</button>
            </div>
        </div>
    </div>

    <!-- Password Change Modal -->
    <div id="passwordChangeModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('passwordChangeModal')">&times;</span>
            <h2>üîê Change Password</h2>
            <form id="passwordChangeForm" onsubmit="handlePasswordChange(event)" style="margin-top: 1.5rem;">
                <div class="form-group">
                    <label for="currentPassword">Current Password:</label>
                    <input type="password" id="currentPassword" placeholder="Enter current password" required>
                </div>
                <div class="form-group">
                    <label for="newPassword">New Password:</label>
                    <input type="password" id="newPassword" placeholder="Enter new password" required>
                </div>
                <div class="form-group">
                    <label for="confirmPassword">Confirm Password:</label>
                    <input type="password" id="confirmPassword" placeholder="Confirm new password" required>
                </div>
                <div id="passwordChangeMessage" style="margin: 1rem 0; padding: 0.75rem; border-radius: 5px; display: none;"></div>
                <div class="modal-actions">
                    <button type="submit" class="btn btn-success">Change Password</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('passwordChangeModal')">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
